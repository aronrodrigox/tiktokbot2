# TikTok Bot - Скачивание видео без водяного знака

🤖 **Многоязычный Telegram бот для скачивания TikTok видео без водяного знака**

## 🌍 Поддерживаемые языки

- 🇷🇺 **Русский** (по умолчанию)
- 🇺🇸 **English**
- 🇪🇸 **Español**
- 🇫🇷 **Français**
- 🇩🇪 **Deutsch**
- 🇵🇹 **Português**
- 🇯🇵 **日本語**
- 🇵🇱 **Polski**
- 🇹🇷 **Türkçe**
- 🇸🇦 **العربية**

## ✨ Возможности

### 🎥 Скачивание видео
- Скачивание TikTok видео без водяного знака
- Поддержка различных форматов ссылок TikTok
- Автоматическое определение качества видео
- Быстрая обработка запросов

### 🌐 Многоязычность
- Автоматическое определение языка пользователя
- Команда `/lang` для смены языка
- Локализованные сообщения об ошибках
- Поддержка 10 языков

### 📢 Рассылка (для админов)
- Массовая рассылка сообщений всем пользователям
- Поддержка текста, изображений, видео, документов, аудио
- Предпросмотр перед отправкой
- Статистика доставки

### ⚡ Производительность
- Кэширование URL видео
- Ограничение одновременных запросов
- Автоматическая очистка временных файлов
- Оптимизированные HTTP запросы

### 🔧 Админ функции
- `/log` - включение/выключение логирования
- `/cache` - очистка кэша и статистика
- `/broadcast` - создание рассылки
- `/broadcast_reset` - сброс состояния рассылки

## 🚀 Установка

### Требования
- Python 3.8+
- Telegram Bot Token
- TikWM API (опционально)

### Установка зависимостей
```bash
pip install -r requirements.txt
```

### Настройка
1. Скопируйте `.env.example` в `.env`
2. Заполните необходимые переменные:
```env
BOT_TOKEN=your_telegram_bot_token
TIKWM_API_KEY=your_tikwm_api_key  # опционально
ADMIN_IDS=123456789,987654321     # ID админов через запятую
```

### Запуск
```bash
python -m app.bot.app
```

## 📁 Структура проекта

```
app/
├── bot/
│   ├── handlers/          # Обработчики команд
│   │   ├── start.py       # Команда /start
│   │   ├── tiktok.py      # Обработка TikTok ссылок
│   │   ├── admin.py       # Админ команды
│   │   └── broadcast.py   # Рассылка
│   ├── middlewares/       # Middleware
│   │   ├── concurrency.py # Ограничение запросов
│   │   ├── activity_log.py # Логирование
│   │   └── user_tracker.py # Отслеживание пользователей
│   └── app.py            # Главный файл приложения
├── services/
│   ├── providers/         # Провайдеры скачивания
│   │   ├── tikwm.py       # TikWM API
│   │   ├── ytdlp_local.py # yt-dlp локально
│   │   └── resolver.py    # Мульти-провайдер
│   ├── localization.py    # Система локализации
│   ├── user_language.py   # Хранение языков пользователей
│   ├── user_storage.py    # Хранение пользователей
│   ├── cache.py          # Кэширование
│   └── progress_bar.py   # Прогресс-бар
├── config/
│   └── settings.py       # Настройки
└── utils/
    ├── validators.py     # Валидация URL
    └── net.py           # Сетевые утилиты
```

## 🔧 Провайдеры скачивания

Бот использует несколько провайдеров для максимальной надежности:

1. **TikWM API** - основной провайдер
2. **yt-dlp** - резервный провайдер (локальное скачивание)

## 📊 Мониторинг

- Логирование активности пользователей
- Статистика использования кэша
- Отслеживание ошибок
- Мониторинг производительности

## 🛡️ Безопасность

- Валидация всех входящих URL
- Ограничение размера файлов
- Автоматическая очистка временных файлов
- Защита от спама и злоупотреблений

## 📝 Лицензия

MIT License

## 🤝 Вклад в проект

Приветствуются любые вклады! Создавайте Issues и Pull Requests.

## 📞 Поддержка

Если у вас есть вопросы или проблемы, создайте Issue в репозитории.

---

**Создано с ❤️ для сообщества TikTok**
